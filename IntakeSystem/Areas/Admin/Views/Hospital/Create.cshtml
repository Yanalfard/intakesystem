<div class="modal-header">
    <h6 class="modal-title" id="modalCenterTitle">
        افزودن مرکز درمانی
    </h6>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<form>
    <div class="modal-body">
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="exampleFormControlSelect1">دسته بندی را انتخاب کنید</label>
                <select class="form-control" id="exampleFormControlSelect1">
                    <option>بیمارستان</option>
                    <option>آزمایشگاه</option>
                </select>
            </div>
        </div>
        <div class="form-row mt-2 bg-light">
            <div class="form-group col-md-4">
                <label class="mt-2">نام مرکز درمانی</label>
                <input class="form-control " placeholder="مثال: امام رضا">
            </div>
            <div class="form-group col-md-4">
                <label class="mt-2">شماره تماس اول</label>
                <input class="form-control " placeholder="...041">
                <span class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label class="mt-2">شماره تماس دوم</label>
                <input class="form-control " placeholder="...041">
                <span class="text-danger"></span>
            </div>
        </div>
        <div class="form-row bg-light">
            <div class="form-group col-md-4">
                <label>نام ادمین</label>
                <input class="form-control" placeholder="مثال: علی علیزاده">
            </div>
            <div class="form-group col-md-4">
                <label>تاریخ ثبت مرکز درمانی</label>
                <input class="form-control " placeholder="...041">
                <span class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label>درصد سود</label>
                <input class="form-control " placeholder="...041">
                <span class="text-danger"></span>
            </div>
        </div>

        <label class="mt-2">افزودن تصویر</label>
        <br />
        <div class="custom-file col-md-7">
            <input type="file" class="custom-file-input form-control " onchange="inputChanged(this)">
            <label class="custom-file-label" for="Image" data-browse="انتخاب" id="FileName">انتخاب تصویر</label>
        </div>
        <div class="form-row">
            <div class="form-group col-md-7">
                <label class="mt-2">توضیحات کوتاه</label>
                <textarea class="textarea-fix-height-120" placeholder=" متن توضیحات... "></textarea>
            </div>
            <span class="text-danger"></span>
        </div>
        <div class="form-row">
            <div class="form-group col-md-7">
                <label>آدرس</label>
                <input class="form-control" placeholder="مثال: تبریز...">
            </div>
        </div>
        <label>لوکیشن مرکز درمانی</label>
        <div id="map" style="height:220px;"></div>
        <div class="modal-footer justify-content-end">
            <button type="submit" class="btn btn-success btn-sm text-white">افزودن<span class="icon-holder uk-margin-small-right" uk-icon="add-circle-outline"></span></button>
        </div>
    </div>
</form>
<link href="~/Areas/Admin/Resource/css/leaflet.css" rel="stylesheet" />
<script src="~/Areas/Admin/Resource/js/leaflet.js"></script>
<script>
    function inputChanged(sender) {
        var fileName = sender.files[0].name;
        sender.parentElement.querySelector('.custom-file-label').innerHTML = fileName;
    }
</script>
<script>
    var map = L.map('map').setView([38.07674409597339, 46.29700302496191], 11);

    L.tileLayer('https://a.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'BehbudTav'
    }).addTo(map);

    var theMarker = {};

    map.on('click', function (e) {
        lat = e.latlng.lat;
        lon = e.latlng.lng;

        //Clear existing marker,

        if (theMarker != undefined) {
            map.removeLayer(theMarker);
        };

        var iconSetting = L.Icon.extend({
            options: {
                iconSize: [32, 32],
                iconAnchor: [16, -8]
            }
        });

        var customIcon = new iconSetting({ iconUrl: '/marker.svg' });
        //Add a marker to show where you clicked.
        $("#Lat").val(lat.toString());
        $("#Lon").val(lon.toString());
        theMarker = L.marker([lat, lon], { icon: customIcon }).addTo(map).bindPopup('<h6 style="color:green">موقعیت شما ثبت شد</h6>').openPopup();
    });

</script>